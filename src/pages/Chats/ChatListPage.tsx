import { useNavigate } from "react-router-dom";
import { chatApi } from "../../APIs/ChatApi";

export const ChatListPage = () => {
  const navigate = useNavigate();

  const { data: chat } = chatApi.getChatRoomlist();

  return (
    <div className="w-full  min-h-screen pb-[4rem] overflow-x-hidden">
      {/* 채팅탭 헤더 */}
      <div className="flex py-4 px-6 absolute top-0 left-0 right-0 z-50 bg-white border-b-2">
        <h1 className="mr-2 text-2xl font-cookie">채팅</h1>{" "}
        <svg
          width="22"
          height="22"
          viewBox="0 0 27 27"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M2.38375 26.3846C1.98715 26.3819 1.59743 26.2807 1.24971 26.0899C0.901982 25.8992 0.607175 25.6249 0.391845 25.2918C0.17394 24.9637 0.0421249 24.586 0.00854491 24.1936C-0.0250351 23.8011 0.0407004 23.4065 0.199694 23.0461L1.7413 19.4481C0.220455 16.6769 -0.249607 13.45 0.41743 10.36C1.08447 7.27008 2.84382 4.52448 5.37243 2.62741C7.90103 0.730332 11.0291 -0.190863 14.1823 0.0329787C17.3355 0.256821 20.3021 1.61067 22.5374 3.84593C24.7726 6.08119 26.1265 9.04779 26.3503 12.201C26.5742 15.3542 25.653 18.4823 23.7559 21.0109C21.8588 23.5395 19.1132 25.2989 16.0233 25.9659C12.9333 26.6329 9.70646 26.1629 6.93523 24.642L3.33717 26.1836C3.03636 26.3148 2.71193 26.3832 2.38375 26.3846ZM13.2601 2.37164C11.3491 2.37242 9.47278 2.88245 7.82438 3.84923C6.17597 4.81601 4.81498 6.20462 3.88151 7.87212C2.94803 9.53961 2.4758 11.4258 2.51341 13.3364C2.55102 15.247 3.09713 17.1131 4.09551 18.7426L4.4182 19.2691L2.39549 23.9878L7.11417 21.9651L7.64222 22.2878C9.05827 23.1556 10.6561 23.6834 12.3104 23.83C13.9647 23.9766 15.6305 23.7379 17.1771 23.1326C18.7236 22.5273 20.1089 21.5719 21.2243 20.3414C22.3396 19.1109 23.1547 17.6387 23.6056 16.0403C24.0565 14.4418 24.1308 12.7607 23.8229 11.1287C23.515 9.49671 22.8332 7.95825 21.8309 6.63401C20.8286 5.30977 19.5331 4.23576 18.0461 3.49624C16.559 2.75671 14.9208 2.37178 13.2601 2.37164ZM18.0403 16.7037H8.4827C8.17308 16.6929 7.87978 16.5622 7.66459 16.3394C7.44939 16.1165 7.32912 15.8188 7.32912 15.509C7.32912 15.1992 7.44939 14.9015 7.66459 14.6786C7.87978 14.4558 8.17308 14.3252 8.4827 14.3143H18.0403C18.2008 14.3087 18.3607 14.3354 18.5105 14.3929C18.6604 14.4504 18.7971 14.5375 18.9126 14.649C19.028 14.7605 19.1199 14.8941 19.1826 15.0419C19.2453 15.1896 19.2777 15.3485 19.2777 15.509C19.2777 15.6695 19.2453 15.8284 19.1826 15.9761C19.1199 16.1239 19.028 16.2575 18.9126 16.369C18.7971 16.4805 18.6604 16.5676 18.5105 16.6251C18.3607 16.6826 18.2008 16.7093 18.0403 16.7037ZM12.0675 11.9278H8.4827C8.17308 11.917 7.87978 11.7864 7.66459 11.5635C7.44939 11.3406 7.32912 11.0429 7.32912 10.7331C7.32912 10.4233 7.44939 10.1256 7.66459 9.90275C7.87978 9.67989 8.17308 9.54926 8.4827 9.53841H12.0675C12.3772 9.54926 12.6705 9.67989 12.8857 9.90275C13.1008 10.1256 13.2211 10.4233 13.2211 10.7331C13.2211 11.0429 13.1008 11.3406 12.8857 11.5635C12.6705 11.7864 12.3772 11.917 12.0675 11.9278Z"
            fill="black"
          />
        </svg>
      </div>
      {/* 채팅리스트들 */}
      <div className="pt-16">
        {chat?.map(chat => (
          <div
            className="border-b w-full h-24 px-6 py-4 flex hover:bg-gray-100"
            onClick={() => navigate(`/chats/${chat.id}`)}
            key={chat.id}
          >
            <img src={chat.imgUrl} className="w-[60px] h-[60px] rounded-full" />

            <div className="px-4 w-[75%]">
              <div className="flex-col">
                <p className="truncate font-semibold text-sm">
                  {chat.channelName}
                </p>
                <p className="pt-2 text-sm text-[#c2c2c2]">
                  {chat.lastMessage}
                </p>
              </div>
            </div>
          </div>
        ))}
      </div>
    </div>
  );
};
